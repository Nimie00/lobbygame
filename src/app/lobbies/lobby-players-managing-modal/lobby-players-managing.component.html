<ion-modal #lobbyPlayersModal>
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Manage Lobby Players</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="close()">Close</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>

    <ion-content>
      <!-- Current Players Section -->
      <ng-container *ngIf="lobbyObservable | async as lobbyO">
        <ion-list>
          <ion-list-header>
            <ion-label>Current Players</ion-label>
          </ion-list-header>

        <ion-item *ngFor="let playerId of lobbyO.players; let i = index">
          <ion-label>
            <h2>{{ lobbyO.playerNames[i] }}</h2>
            <p class="player-id">ID: {{ playerId }}</p>
          </ion-label>

          <!-- Player Actions -->
          <ion-buttons slot="end" *ngIf="playerId !== lobbyO.ownerId">
            <ion-button (click)="renamePlayer(playerId, lobbyO.playerNames[i])" color="primary">
              <ion-icon name="create-outline"></ion-icon>
            </ion-button>
            <ion-button (click)="kickPlayer(playerId, lobbyO.playerNames[i])" color="warning">
              <ion-icon name="exit-outline"></ion-icon>
            </ion-button>
            <ion-button (click)="banPlayer(playerId, lobbyO.playerNames[i])" color="danger">
              <ion-icon name="ban-outline"></ion-icon>
            </ion-button>
            <ion-button (click)="promotePlayer(playerId, lobbyO.playerNames[i])" color="danger">
              <ion-icon name="diamond-outline"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-item>
      </ion-list>

      <!-- Invite Link -->
      <ion-item>
        <ion-label>Invite link</ion-label>
        <ion-text>{{ routertext + lobbyO?.id }}</ion-text>
        <ion-button (click)="copyToClipboard(routertext + lobbyO?.id)">
          <ion-icon name="copy-outline"></ion-icon>
        </ion-button>
      </ion-item>

      <!-- Banned Players Section -->
      <ion-list>
        <ion-list-header>
          <ion-label>Banned Players</ion-label>
        </ion-list-header>
        <ion-item *ngFor="let bannedId of lobbyO.bannedPlayers; let i = index">
          <ion-label>
            <h2>{{ lobbyO.bannedPlayerNames[i] }}</h2>
            <p class="player-id">ID: {{ bannedId }}</p>
          </ion-label>
          <ion-button slot="end" (click)="unbanPlayer(bannedId, lobbyO.bannedPlayerNames[i])" color="medium">
            <ion-icon name="refresh-outline"></ion-icon>
            Unban
          </ion-button>
        </ion-item>
      </ion-list>
      </ng-container>
    </ion-content>
  </ng-template>
</ion-modal>
