<ion-item class="lobby-item">
  <ion-card class="lobby-card" [style.background-color]="getLobbyBackgroundColor(lobby)">
    <ion-card-header>
      <ion-card-title><strong>{{ lobby.name }}</strong></ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="lobby-info">
        <ion-label><strong>Game: {{ lobby.gameType }}</strong></ion-label>
        <ion-label><strong>Owner: {{ lobby.ownerName }}</strong></ion-label>
        <ion-label><strong>Players: {{ lobby.players.length }}</strong></ion-label>
        <ion-label><strong>Spectators: {{ lobby.spectators.length }}</strong></ion-label>
        <p *ngIf="lobby.private"> This lobby is set to private, you can find the invite link after clicking the "Manage the players in the lobby' button</p>
      </div>

      <span class="lobby-actions" *ngIf="actions && actions.length > 0">
        <ng-container *ngFor="let action of actions">
          <ion-button *ngIf="action.condition"
                      [class]="action.class"
                      (click)="action.command()"
                      [disabled]="action.disabled">
            {{ action.label }}
          </ion-button>
        </ng-container>
      </span>
    </ion-card-content>
  </ion-card>
</ion-item>

  <ion-modal #modal>
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Enter Password</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="closePasswordModal()">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ion-item>
          <ion-label position="floating">Password</ion-label>
          <ion-input type="password" [(ngModel)]="password"></ion-input>
        </ion-item>
        <ion-item>
          <ion-button (click)="joinWithPassword(this.lobby.id)">Join</ion-button>
        </ion-item>
        <ion-item>
          <ion-button (click)="joinWithPasswordAsSpectator(this.lobby.id)" [disabled]="!lobby.allowSpectators">Join as
            Spectator
          </ion-button>
          <ion-label *ngIf="!lobby.allowSpectators">The lobby doesn't allow spectators</ion-label>
        </ion-item>
      </ion-content>
    </ng-template>
  </ion-modal>

<app-create-lobby-modal #createLobbyModal
                        [currentUser]="currentUser"
                        (closeModal)="closeCreateLobbyModal()"
                        [lobby]="lobby"></app-create-lobby-modal>

<app-lobby-players-managing #lobbyPlayersModal
                            [currentUser]="currentUser"
                            [lobbyId]="lobby.id"
                            (closeModal)="closeLobbyPlayersModal()">
</app-lobby-players-managing>
