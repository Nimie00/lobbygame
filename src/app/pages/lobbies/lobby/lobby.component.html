<ion-item class="lobby-item">
  <ion-card class="lobby-card" [style.background-color]="getLobbyBackgroundColor(lobby)">
    <ion-card-header>
      <ion-card-title><strong>{{ lobby.name }}</strong></ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="lobby-info">
        <ion-label><strong>{{ "GAME" | language }}: {{ lobby.gameType }}</strong></ion-label>
        <ion-label><strong>{{ "OWNER" | language }}: {{ lobby.ownerName }}</strong></ion-label>
        <ion-label><strong>{{ "PLAYERS" | language }}: {{ lobby.players.length }}</strong></ion-label>
        <ion-label><strong>{{ "SPECTATORS" | language }}: {{ lobby.spectators.length }}</strong></ion-label>
        <p *ngIf="lobby.private && lobby.ownerId === currentUser.id" ><strong>{{ "LOBBY_PRIVATE_NOTIFIER_OWNER" | language }}</strong></p>
        <p *ngIf="lobby.private && lobby.ownerId !== currentUser.id" ><strong>{{ "LOBBY_PRIVATE_NOTIFIER" | language }}</strong></p>

      </div>

      <span class="lobby-actions" *ngIf="actions && actions.length > 0">
        <ng-container *ngFor="let action of actions">
          <ion-button *ngIf="action.condition"
                      [class]="action.class"
                      (click)="action.command()"
                      [disabled]="action.disabled">
            {{ action.label | language }}
          </ion-button>
        </ng-container>
      </span>
    </ion-card-content>
  </ion-card>
</ion-item>

<ion-modal #modal>
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>{{ "ENTER_PASSWORD"| language }}</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="closePasswordModal()">Close</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <ion-item>
        <ion-label position="floating">{{ "PASSWORD" | language }}</ion-label>
        <ion-input type="password" [(ngModel)]="password"></ion-input>
      </ion-item>
      <ion-item>
        <ion-button
          class='btn-join-with-password'
          (click)="joinWithPassword(this.lobby.id)"
        >{{ "JOIN_AS_PLAYER" | language }}
        </ion-button>
      </ion-item>
      <ion-item>
        <ion-button
          class='btn-spectate-with-password'
          (click)="joinWithPasswordAsSpectator(this.lobby.id)"
          [disabled]="!lobby.allowSpectators">
          {{ "START_SPECTATING" | language }}
        </ion-button>
        <ion-label *ngIf="!lobby.allowSpectators">{{ "SPECTATORS_NOT_ALLOWED" | language }}</ion-label>
      </ion-item>
    </ion-content>
  </ng-template>
</ion-modal>

<app-create-lobby-modal #createLobbyModal
                        [currentUser]="currentUser"
                        (closeModal)="closeCreateLobbyModal()"
                        [lobby]="lobby"></app-create-lobby-modal>

<app-lobby-players-managing #lobbyPlayersModal
                            [currentUser]="currentUser"
                            [lobbyId]="lobby.id"
                            (closeModal)="closeLobbyPlayersModal()">
</app-lobby-players-managing>
